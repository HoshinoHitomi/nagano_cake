# ながのCAKE
長野県にある小さな洋菓子店「ながのCAKE」の商品を通販するためのECサイトです。

## 案件の背景
元々近隣住民が顧客だったが、昨年始めたInstagramから人気となり、全国から注文が来るようになった。<br>
InstagramのDMやメールで通販の注文を受けていたが、情報管理が煩雑になってきたため、<br>
管理機能を含んだ通販サイトを開設しようと思い至った。

## 通販について
* 通販では注文に応じて製作する受注生産型としている。
* 現在通販での注文量は十分に対応可能な量のため、1日の受注量に制限は設けない。
* 送料は1配送につき全国一律800円。
* 友人や家族へのプレゼントなど、注文者の住所以外にも商品を発送できる。
* 支払方法はクレジットカード、銀行振込から選択できる。

## 用語について

|用語|意味|
|---|---|
|顧客|ながのCAKEの商品を購入する人（客）|
|会員, エンドユーザ|ECサイトにユーザ登録している顧客|
|ECサイト|顧客が利用するサイト|
|管理サイト|店で働く事務員・パティシエ等が利用するサイト（管理者用サイト）|
|注文ステータス|注文の状態遷移を表す（後述）。|
|製作ステータス|注文に紐付く注文商品の状態遷移を表す（後述）。|
|販売ステータス|商品の販売状況を表す。現状、販売中、売切れの2パターンがある。<br>販売停止商品は「売切れ」をセットする。|
|会員ステータス|現状、有効・退会の2パターンがある。|
|ジャンル|商品の種類。管理者が追加・編集できる。<br>現状、ケーキ、プリン、焼き菓子、キャンディの4ジャンルある。|
|注文個数|1回の注文に紐付く注文個数の合計。<br>例）商品Aを3個、商品Bを2個注文→注文個数は5。|
|商品小計|商品単価（税込）×個数<br>例）1,200円（税込）の商品を2個購入＝商品小計は2,400円|

## 各種ステータス
注文〜発送まで、下記のステータスで注文及び注文内容を管理する。
### 注文ステータス
注文情報を表す。会員の購入履歴にも表示する。

|ステータス名|設定タイミング|
|-----------|-------------|
|入金待ち|注文したタイミングでデフォルトで設定される。|
|入金確認|事務員が入金を確認したら更新する。|
|製作中|紐づく注文商品の注文ステータスが一つでも「製作中」になったら自動更新。|
|発送準備中|紐づく注文商品の注文ステータスが全て「製作完了」になったら自動更新。|
|発送完了|事務員が発送完了時に設定する。|

### 製作ステータス
各商品の製作状況を表す。内部でのみ使用する。

|ステータス名|設定タイミング|
|-----------|-------------|
|製作不可|注文したタイミングでデフォルトで設定される。|
|製作待ち|紐づく注文商品の注文ステータスが「入金確認」になったら自動更新。|
|製作中|製作着手するタイミングでパティシエが設定する。|
|製作完了|製作が完了したタイミングでパティシエが設定する。|

# 実装機能
## Customer(顧客・会員)
* 顧客は会員登録、ログイン・ログアウト、退会ができます。
* 会員のログインはメールアドレスとパスワードで行えます。
  - 会員がログインしている場合、ページのヘッダーに会員名が表示されます。
* サイトの閲覧はログインなしで行えます。
* 商品をカートに入れ、1度に複数種類、複数商品の購入ができます。また、カート内の商品は個数変更・削除ができます。
  - カートへの商品追加はログインなしでは行えません。
  - クレジットカード情報はシステム上保持しません。
* 会員は配送先を複数登録しておくことが可能です。
  - 注文情報で新しい配送先を入力した場合もその配送先が新しく登録されます。
* 会員はマイページから会員情報の閲覧・編集、注文履歴の閲覧、配送先の閲覧・編集ができます。
* 注文履歴一覧には下記の情報が表示されます。
  - 注文日
  - 配送先
  - 注文商品
  - 支払金額（商品合計＋送料）
  - 注文ステータス
* 注文履歴詳細には下記の情報が表示されます。
  - 注文日
  - 配送先
  - 支払方法
  - 注文ステータス
  - 商品の注文内容詳細（商品名、単価、個数、小計）
  - 請求情報（商品合計、送料、支払金額）
* 会員登録時、下記の情報を会員情報として入力できること
  - 名前（姓・名）
  - 名前（カナ姓・カナ名）
  - 郵便番号
  - 住所
  - 電話番号
  - メールアドレス
  - パスワード
* 商品価格は税込価格で表示されます。(軽減税率対象のため、消費税8%)
* ヘッダーに検索窓を設置しており、商品名で検索できます。
  - ジャンル検索はジャンル名を押下することでそのジャンルの商品を検索できます。

## Admin(店側) 
* 管理者用メールアドレスとパスワードでログインできます。
* 商品の新規追加、編集、販売停止（売切表示）が行えます。
* 商品情報は下記のものを持っています。
  - 商品名
  - 商品説明文
  - ジャンル
  - 税抜価格
  - 商品画像
  - 販売ステータス
* 会員登録されている会員情報の閲覧、編集、退会処理が行えます。
* 会員の注文履歴が一覧・詳細表示できます。
* 注文履歴には注文ごとに下記の情報が表示されること
  - 購入者
  - 購入日
  - 購入内容
  - 請求額合計
  - 配送先
  - 注文ステータス
  - 各注文商品の製作ステータス
* ヘッダーに検索窓を配置しており、会員氏名で検索できます。

# 使用言語
* HTML&CSS
* Ruby
* Javascript
* フレームワーク
  - Ruby on rails (5.2.6)

# Gem
* devise
* refile
* refile-mini_magick
* kaminari
* rails-i18n
* enum_help
* bootstrap
* jquery-rails
* font-awesome-sass

# 作成者
* 星野仁美(https://github.com/HoshinoHitomi)
